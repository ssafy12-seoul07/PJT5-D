### PJT5-D

## 프로젝트 개요

이 프로젝트는 SSAFIT 웹페이지의 메인 화면에 표시될 비디오 콘텐츠와 사용자 리뷰를 관리하는 데이터베이스를 설계하고 구현하는 작업입니다. video, users, review라는 세 가지 주요 테이블을 사용하여 비디오 콘텐츠, 사용자 정보, 그리고 각 사용자들이 남긴 리뷰를 연결하였습니다.

## 테이블 생성

학습 내용
테이블 생성과 칼럼 정의
이번 프로젝트에서는 MySQL에서 테이블을 생성하고 각 칼럼을 정의하는 과정을 학습하였습니다. 데이터베이스의 테이블은 여러 개의 속성(칼럼)을 가지며, 각 칼럼은 특정 데이터 유형과 크기를 가집니다.

Primary Key
**Primary Key(기본 키)**는 테이블 내에서 각 행을 고유하게 식별하는 데 사용됩니다. 각 테이블에는 최소 하나의 기본 키가 있어야 하며, 기본 키는 중복될 수 없습니다. 예를 들어, users 테이블에서는 uid를 기본 키로 설정하여 각 사용자가 고유하게 식별될 수 있도록 했습니다.

학습 포인트:

기본 키는 테이블 내에서 각 행을 고유하게 식별합니다.
기본 키는 중복되지 않고, NOT NULL이어야 합니다.

Foreign Key
**Foreign Key(외래 키)**는 한 테이블의 칼럼이 다른 테이블의 기본 키를 참조할 때 사용됩니다. 이를 통해 테이블 간의 관계를 설정하고 데이터 무결성을 유지할 수 있습니다. 예를 들어, review 테이블에서 user_id는 users 테이블의 uid를 참조하고, video_id는 video 테이블의 video_id를 참조합니다.

학습 포인트:

외래 키는 한 테이블의 칼럼이 다른 테이블의 기본 키를 참조할 때 사용됩니다.
외래 키는 테이블 간의 참조 무결성을 유지하고, 부모 테이블의 데이터 삭제 시 동작을 정의할 수 있습니다. (예: ON DELETE CASCADE는 부모 테이블의 데이터가 삭제되면 관련된 자식 테이블의 데이터도 삭제됩니다.

데이터 무결성 유지
테이블 간의 참조 관계를 설정할 때, Primary Key와 Foreign Key를 사용하여 데이터의 무결성을 유지하는 방법을 배웠습니다. 외래 키 제약 조건을 설정하면, 참조하고 있는 데이터가 없을 때 오류가 발생하여 데이터가 잘못 저장되지 않도록 보호해줍니다. 이를 통해 테이블 간의 데이터 무결성을 효과적으로 유지할 수 있습니다.

테이블 간 관계
users와 review는 1 대 다(1
) 관계입니다. 한 명의 사용자가 여러 개의 리뷰를 남길 수 있습니다.
video와 review는 1 대 다(1
) 관계입니다. 하나의 비디오에 여러 리뷰가 달릴 수 있습니다.

### 문제 발생

문제: 외래 키 제약 조건 위반 (에러 코드 1452)
테이블을 구성하고 데이터를 삽입하는 과정에서 Error Code: 1452. Cannot add or update a child row: a foreign key constraint fails라는 에러가 발생했습니다. 이 오류는 외래 키로 참조하는 값이 부모 테이블에 존재하지 않을 때 발생합니다.


### 문제 해결

*데이터 유효성 확인

삽입하려는 user_id와 video_id 값이 각각 users 및 video 테이블에 존재하는지 확인했습니다.


*외래 키와 참조 키의 데이터 타입 일치 확인

외래 키와 참조 키의 데이터 타입이 동일한지 확인했습니다. 

*InnoDB 엔진 사용 확인

세 가지 경우를 확인 했는데, 완전히 일치하는 정답은 없었습니다. 그나마 1번 문제 상황과 비슷한 상황이었는데, 테이블에 데이터는 존재했지만, 모종의 이유로 테이블 안의 값이
review의 id 값과 달라서 생긴 문제였음을 확인하고 해결하였습니다. 

이로 인해서 spl에서 데이터를 다룰 때에도 자바 코드를 보는 것 처럼 섬세한 확인 필요하다는 것을 깨달았습니다.